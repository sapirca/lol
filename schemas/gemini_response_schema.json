{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Song Animation Description",
    "description": "Schema for describing animations synchronized with song beats, optimized for Gemini.",
    "type": "object",
    "properties": {
      "animation": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Song title."
          },
          "duration": {
            "type": "integer",
            "description": "Song duration in seconds."
          },
          "beats": {
            "type": "array",
            "description": "Array of animation segments, each linked to song beat ranges.",
            "items": {
              "type": "object",
              "properties": {
                "beat_start": {
                  "type": "number",
                  "description": "Start beat of the animation segment."
                },
                "beat_end": {
                  "type": "number",
                  "description": "End beat of the animation segment."
                },
                "elements": {
                  "anyOf": [
                    {
                      "type": "integer",
                      "minimum": 1,
                      "maximum": 12,
                      "description": "Element number (1-12)."
                    },
                    {
                      "type": "string",
                      "enum": ["all", "odd", "even", "left", "right", "center", "outer"],
                      "description": "Element group name."
                    }
                  ],
                  "description": "Target elements for animation effects, specified by number or group name."
                },
                "mapping": {
                  "type": "string",
                  "enum": ["all", "centric", "updown", "arc", "ind", "b1", "b2"],
                  "description": "Element mapping style: 'all', 'centric', 'updown', 'arc', 'ind', 'b1', 'b2'."
                },
                "coloring": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": ["constant", "rainbow"],
                      "description": "Coloring method: 'constant' or 'rainbow'."
                    },
                    "hue": {
                      "type": "integer",
                      "description": "Hue value (0-360) for constant coloring.",
                      "minimum": 0,
                      "maximum": 360
                    }
                  },
                  "required": ["type"],
                  "dependencies": {
                    "type": {
                      "oneOf": [
                        {
                          "properties": {
                            "type": { "const": "constant" },
                            "hue": { "type": "integer" }
                          },
                          "required": ["hue"]
                        },
                        {
                          "properties": {
                            "type": { "const": "rainbow" }
                          },
                          "required":
                        }
                      ]
                    }
                  }
                },
                "brightness": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": ["fadeIn", "fadeOut", "constant"],
                      "description": "Brightness control: 'fadeIn', 'fadeOut', or 'constant'."
                    },
                    "value": {
                      "type": "number",
                      "description": "Brightness value (0-1) for constant brightness.",
                      "minimum": 0,
                      "maximum": 1
                    }
                  },
                  "dependencies": {
                    "type": {
                      "oneOf": [
                        {
                          "properties": {
                            "type": { "const": "constant" }
                          },
                          "required": ["value"]
                        },
                        {
                          "properties": {
                            "type": { "enum": ["fadeIn", "fadeOut"] }
                          },
                          "required":
                        }
                      ]
                    }
                  }
                },
                "motion": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": ["snake", "snakeInOut"],
                      "description": "Motion effect: 'snake' or 'snakeInOut'."
                    }
                  }
                }
              },
              "required": ["beat_start", "beat_end", "elements", "coloring"],
              "description": "Defines a segment of the animation linked to a specific beat range."
            },
            "minItems": 1
          }
        },
        "required": ["name", "duration", "beats"],
        "description": "Contains metadata and beat-linked animation segments."
      }
    },
    "required": ["animation"]
  }